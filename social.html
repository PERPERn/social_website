<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WWI Deck ‚Ä¢ Mobile Safe</title>

  <!-- ‚úÖ Tailwind config MUST be set BEFORE loading the CDN script -->
  <script>
    window.tailwind = window.tailwind || {};
    window.tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ["ui-sans-serif","system-ui","Kanit","Noto Sans Thai","sans-serif"],
          },
        },
      },
    };
  </script>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    html, body { height: 100%; }
    body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

    .fade-enter { opacity: 0; transform: translateY(16px); filter: blur(8px); }
    .fade-enter-active { opacity: 1; transform: translateY(0); filter: blur(0); transition: all 420ms cubic-bezier(.22,1,.36,1); }
    .fade-exit { opacity: 1; transform: translateY(0); filter: blur(0); }
    .fade-exit-active { opacity: 0; transform: translateY(-12px); filter: blur(8px); transition: all 320ms cubic-bezier(.22,1,.36,1); }

    .noise {
      background-image:
        repeating-linear-gradient(0deg, rgba(255,255,255,0.10) 0px, rgba(255,255,255,0.10) 1px, transparent 1px, transparent 3px),
        repeating-linear-gradient(90deg, rgba(255,255,255,0.08) 0px, rgba(255,255,255,0.08) 1px, transparent 1px, transparent 4px);
      opacity: .08;
      mix-blend-mode: overlay;
      pointer-events: none;
    }

    .lc2{ display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
    .lc3{ display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; }

    .record .topbar, .record .bottombar, .record .sidepanel { display: none !important; }
    .record .mainpad { padding-bottom: 2.5rem !important; }
  </style>
</head>

<body class="bg-[#0b0f1a] text-white font-sans overflow-x-hidden">
  <!-- Background -->
  <div id="bg" class="fixed inset-0 bg-gradient-to-br from-yellow-500/8 via-transparent to-cyan-500/8"></div>
  <div class="fixed -top-28 left-[-140px] h-[520px] w-[520px] rounded-full bg-yellow-400/10 blur-3xl pointer-events-none"></div>
  <div class="fixed top-10 right-[-170px] h-[440px] w-[440px] rounded-full bg-cyan-400/10 blur-3xl pointer-events-none"></div>
  <div class="fixed bottom-[-170px] left-[16%] h-[520px] w-[520px] rounded-full bg-violet-400/10 blur-3xl pointer-events-none"></div>
  <div class="fixed inset-0 noise"></div>

  <!-- Top bar -->
  <div class="topbar sticky top-0 z-30 border-b border-white/10 bg-[#0b0f1a]/55 backdrop-blur-2xl">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 py-3 flex items-center justify-between gap-3">
      <div class="flex items-center gap-3">
        <div class="h-2.5 w-2.5 rounded-full bg-yellow-300 shadow-[0_0_24px_rgba(253,224,71,0.45)]"></div>
        <div class="leading-tight">
          <div class="text-sm font-semibold">WWI Deck ‚Ä¢ <span class="text-white/80">Mobile Safe</span></div>
          <div class="text-xs text-white/55">‚Üê/‚Üí Space ‚Ä¢ G overview ‚Ä¢ N notes ‚Ä¢ F fullscreen ‚Ä¢ R record</div>
        </div>
      </div>
      <div class="hidden sm:flex items-center gap-2">
        <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">1914‚Äì1918</span>
        <span id="slideCount" class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">Slide 1/1</span>
      </div>
    </div>
    <div class="mx-auto max-w-6xl px-4 sm:px-6 pb-3">
      <div class="relative h-1.5 w-full overflow-hidden rounded-full bg-white/10">
        <div id="progress" class="absolute left-0 top-0 h-full rounded-full bg-gradient-to-r from-amber-300 via-yellow-300 to-cyan-300 shadow-[0_0_40px_rgba(253,224,71,0.35)] transition-all duration-300" style="width:0%"></div>
      </div>
    </div>
  </div>

  <!-- Main -->
  <main class="mx-auto max-w-6xl px-4 sm:px-6 pt-6 pb-24 mainpad relative z-10">
    <!-- Header row -->
    <div class="mb-5 grid grid-cols-1 gap-4 lg:grid-cols-[1fr_360px]">
      <div class="flex items-center justify-between gap-3">
        <div class="flex flex-wrap items-center gap-2">
          <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">‚ú® Smooth deck</span>
          <span id="yearPill" class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">Year: 1914</span>
          <span id="recordPill" class="hidden inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">üé• Record mode</span>
        </div>

        <div class="flex items-center gap-2">
          <button id="btnOverview" title="Overview (G)" class="rounded-2xl border border-white/10 bg-white/5 p-3 text-white/90 shadow-[0_20px_60px_rgba(0,0,0,0.35)] backdrop-blur-xl transition hover:bg-white/10 active:translate-y-[1px]">‚ò∑</button>
          <button id="btnNotes" title="Notes (N)" class="rounded-2xl border border-white/10 bg-white/5 p-3 text-white/90 shadow-[0_20px_60px_rgba(0,0,0,0.35)] backdrop-blur-xl transition hover:bg-white/10 active:translate-y-[1px]">üìù</button>
          <button id="btnRecord" title="Record (R)" class="rounded-2xl border border-white/10 bg-white/5 p-3 text-white/90 shadow-[0_20px_60px_rgba(0,0,0,0.35)] backdrop-blur-xl transition hover:bg-white/10 active:translate-y-[1px]">üé•</button>
          <button id="btnFs" title="Fullscreen (F)" class="rounded-2xl border border-white/10 bg-white/5 p-3 text-white/90 shadow-[0_20px_60px_rgba(0,0,0,0.35)] backdrop-blur-xl transition hover:bg-white/10 active:translate-y-[1px]">‚õ∂</button>
        </div>
      </div>

      <!-- timeline -->
      <aside class="sidepanel lg:justify-self-end">
        <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
          <div class="mb-2 flex items-center justify-between">
            <div class="text-xs font-semibold text-white/80">Timeline</div>
            <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">
              Active: <span id="activeYear">1914</span>
            </span>
          </div>
          <div class="relative mt-2">
            <div class="h-2 w-full rounded-full bg-white/10"></div>
            <div id="timeFill" class="absolute top-0 h-2 rounded-full bg-gradient-to-r from-amber-300 via-yellow-300 to-cyan-300 shadow-[0_0_30px_rgba(253,224,71,0.28)] transition-all duration-500" style="width:20%"></div>
          </div>
          <div class="mt-3 grid grid-cols-5 gap-2 text-center">
            <div id="y1914" class="rounded-xl border border-yellow-300/40 bg-yellow-300/10 text-yellow-100 px-2 py-2 text-xs">1914</div>
            <div id="y1915" class="rounded-xl border border-white/10 bg-white/5 text-white/60 px-2 py-2 text-xs">1915</div>
            <div id="y1916" class="rounded-xl border border-white/10 bg-white/5 text-white/60 px-2 py-2 text-xs">1916</div>
            <div id="y1917" class="rounded-xl border border-white/10 bg-white/5 text-white/60 px-2 py-2 text-xs">1917</div>
            <div id="y1918" class="rounded-xl border border-white/10 bg-white/5 text-white/60 px-2 py-2 text-xs">1918</div>
          </div>
        </div>
      </aside>
    </div>

    <!-- Deck area -->
    <section id="deckWrap" class="space-y-6">
      <div id="overview" class="hidden">
        <div class="mb-4 flex items-center justify-between gap-3">
          <div class="text-sm font-semibold text-white/85">Overview (‡∏Å‡∏î G ‡∏´‡∏£‡∏∑‡∏≠ Esc ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î)</div>
          <span id="ovCount" class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">Slide 1/1</span>
        </div>
        <div id="ovGrid" class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"></div>
      </div>

      <div id="slide" class="fade-enter"></div>

      <div id="notesBlock" class="hidden rounded-2xl border border-dashed border-white/15 bg-black/20 p-4 text-sm text-white/70">
        <b class="text-yellow-200">Presenter note:</b> <span id="notesText"></span>
      </div>
    </section>
  </main>

  <!-- Bottom bar -->
  <div class="bottombar fixed inset-x-0 bottom-0 z-40 border-t border-white/10 bg-[#0b0f1a]/55 backdrop-blur-2xl">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 py-3 flex items-center justify-between gap-3">
      <div class="flex items-center gap-2">
        <button id="btnPrev" class="inline-flex items-center gap-2 rounded-2xl border border-white/10 bg-gradient-to-b from-white/14 to-white/5 px-4 py-3 text-sm font-semibold text-white shadow-[0_30px_90px_rgba(0,0,0,0.45)] backdrop-blur-xl transition hover:from-white/18 hover:to-white/8 active:translate-y-[1px]">
          ‚Üê ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
        </button>
        <button id="btnNext" class="inline-flex items-center gap-2 rounded-2xl border border-white/10 bg-gradient-to-b from-white/14 to-white/5 px-4 py-3 text-sm font-semibold text-white shadow-[0_30px_90px_rgba(0,0,0,0.45)] backdrop-blur-xl transition hover:from-white/18 hover:to-white/8 active:translate-y-[1px]">
          ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí
        </button>
      </div>
      <span id="bottomCount" class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">
        Slide 1/1
      </span>
    </div>
  </div>

  <script>
    console.log("JS RUNNING ‚úÖ");

    /* ‚úÖ make clamp GLOBAL (was causing clamp is not defined) */
    function clamp(n, min, max) {
      return Math.max(min, Math.min(max, n));
    }

    /* --------------------- data --------------------- */
    const slides = [ /* <-- ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πâ data ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì */ 
      {
        type: "chapter",
        year: 1914,
        kicker: "Chapter 1 ‚Ä¢ ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô",
        title: '‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÇ‡∏•‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏∂‡πà‡∏á <span class="bg-gradient-to-r from-amber-200 to-cyan-200 bg-clip-text text-transparent">(1914‚Äì1918)</span>',
        subtitle: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏±‡∏î‡πÅ‡∏¢‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡πÇ‡∏•‡∏Å: ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏ä‡∏¥‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‚Üí ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à ‚Üí ‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏™‡∏°‡∏±‡∏¢‡πÉ‡∏´‡∏°‡πà ‚Üí ‡∏°‡∏£‡∏î‡∏Å‡∏ñ‡∏∂‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô",
        notes: "‡πÄ‡∏Å‡∏£‡∏¥‡πà‡∏ô 20‚Äì30 ‡∏ß‡∏¥: ‡πÄ‡∏ô‡πâ‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏°‡∏≠‡∏á '‡∏£‡∏∞‡∏ö‡∏ö' ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÇ‡∏ó‡∏©‡∏Ñ‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ"
      },
      {
        type: "content",
        year: 1914,
        kicker: "Slide 2 ‚Ä¢ ‡πÇ‡∏•‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°",
        title: "‡∏¢‡∏∏‡πÇ‡∏£‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏µ 1914: ‡∏ñ‡∏±‡∏á‡∏î‡∏¥‡∏ô‡∏õ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏¢‡πÑ‡∏ü",
        subtitle: "‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏à‡∏£‡∏¥‡∏ç ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏≠‡∏≥‡∏ô‡∏≤‡∏à + ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏±‡∏ß + ‡∏Å‡∏≤‡∏£‡∏™‡∏∞‡∏™‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á",
        bullets: [
          "‡∏°‡∏´‡∏≤‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡∏¢‡∏∏‡πÇ‡∏£‡∏õ‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á <b class='text-white'>‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•</b> ‡πÅ‡∏•‡∏∞ <b class='text-white'>‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏®‡∏£‡∏µ</b>",
          "‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô ‚Üí <span class='text-white/80'>‚Äú‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏ö‚Äù ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</span>",
          "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏î‡∏£‡∏∞‡πÅ‡∏ß‡∏á: ‚Äú‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‚Ä¶ ‡∏≠‡∏µ‡∏Å‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏∞‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏Å‡πà‡∏≠‡∏ô‚Äù"
        ],
        side: [
          { h: "‡∏†‡∏≤‡∏û‡∏à‡∏≥", t: "‡πÇ‡∏•‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏á‡∏î‡∏¥‡∏ô‡∏õ‡∏∑‡∏ô‚Äî‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Ñ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏¢‡πÑ‡∏ü‡πÄ‡∏•‡πá‡∏Å ‡πÜ" },
          { h: "‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡πÉ‡∏ô‡∏Ñ‡∏•‡∏¥‡∏õ", t: "‡πÄ‡∏ô‡πâ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏±‡∏ß + ‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•" }
        ],
        notes: "‡∏¢‡πâ‡∏≥‡∏ß‡πà‡∏≤ '‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡πà‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß' ‡πÅ‡∏ï‡πà‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏î‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏ù‡πà‡∏≤‡∏¢‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏£‡πá‡∏ß"
      },
      {
        type: "content",
        year: 1914,
        kicker: "Slide 3 ‚Ä¢ ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß",
        title: "‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß: <span class='text-yellow-200'>MAIN</span>",
        subtitle: "‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏™‡∏∞‡∏™‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏∂‡∏á‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡∏à‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ ‚Äú‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å ‡πÜ‚Äù ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏≤‡∏¢‡∏ô‡∏∞",
        bullets: [
          "<b class='text-white'>Militarism</b>: ‡πÅ‡∏Ç‡πà‡∏á‡∏™‡∏∞‡∏™‡∏°‡∏Å‡∏≠‡∏á‡∏ó‡∏±‡∏û/‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò ‚Üí ‡∏Å‡∏î‡∏î‡∏±‡∏ô‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏ó‡∏ô‡πÄ‡∏à‡∏£‡∏à‡∏≤",
          "<b class='text-white'>Alliances</b>: ‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£‡πÅ‡∏Ç‡πá‡∏á‡∏Å‡∏£‡πâ‡∏≤‡∏ß ‚Üí ‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏à‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏•‡∏∏‡∏Å‡∏•‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏ß‡∏µ‡∏õ",
          "<b class='text-white'>Imperialism</b>: ‡πÅ‡∏Ç‡πà‡∏á‡∏≠‡∏≤‡∏ì‡∏≤‡∏ô‡∏¥‡∏Ñ‡∏°/‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£ ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏±‡∏î‡πÅ‡∏¢‡πâ‡∏á‡∏™‡∏∞‡∏™‡∏°",
          "<b class='text-white'>Nationalism</b>: ‡∏ä‡∏≤‡∏ï‡∏¥‡∏ô‡∏¥‡∏¢‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏≠‡∏•‡∏Ç‡πà‡∏≤‡∏ô ‚Üí ‡∏õ‡∏∞‡∏ó‡∏∞‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏£‡∏£‡∏î‡∏¥‡πÉ‡∏´‡∏ç‡πà"
        ],
        side: [{ h: "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏à‡∏≥", t: "MAIN = ‡πÅ‡∏£‡∏á‡∏ï‡∏∂‡∏á‡∏™‡∏∞‡∏™‡∏° ‚Ä¢ Trigger = ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏¢‡πÑ‡∏ü" }],
        notes: "‡∏û‡∏π‡∏î‡∏ä‡∏±‡∏î ‡πÜ ‡∏ß‡πà‡∏≤ MAIN ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏° ‡πÅ‡∏ï‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ '‡∏Ñ‡∏∏‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå' ‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏¥‡∏Å‡∏§‡∏ï"
      },
      {
        type: "content",
        year: 1914,
        kicker: "Slide 4 ‚Ä¢ ‡∏ä‡∏ô‡∏ß‡∏ô‡πÄ‡∏´‡∏ï‡∏∏",
        title: "Sarajevo 28 ‡∏°‡∏¥.‡∏¢. 1914: ‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡∏ô‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏™‡∏±‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏¢‡∏∏‡πÇ‡∏£‡∏õ",
        subtitle: "‡∏Å‡∏≤‡∏£‡∏•‡∏≠‡∏ö‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£ Archduke Franz Ferdinand ‚Üí ‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏Å‡∏≤‡∏£‡∏ó‡∏π‡∏ï ‚Üí ‡πÇ‡∏î‡∏°‡∏¥‡πÇ‡∏ô‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£",
        bullets: [
          "‡∏•‡∏≠‡∏ö‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏£‡∏±‡∏ä‡∏ó‡∏≤‡∏¢‡∏≤‡∏ó‡∏≠‡∏≠‡∏™‡πÄ‡∏ï‡∏£‡∏µ‡∏¢-‡∏Æ‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏µ ‚Üí ‡∏≠‡∏≠‡∏™‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‚Äú‡∏•‡∏á‡πÇ‡∏ó‡∏©‚Äù ‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÄ‡∏ö‡∏µ‡∏¢",
          "‡∏´‡πà‡∏ß‡∏á‡πÇ‡∏ã‡πà‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£‡πÄ‡∏£‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö: ‡∏£‡∏±‡∏™‡πÄ‡∏ã‡∏µ‡∏¢‡∏´‡∏ô‡∏∏‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÄ‡∏ö‡∏µ‡∏¢ ‚Üí ‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ‡∏´‡∏ô‡∏∏‡∏ô‡∏≠‡∏≠‡∏™‡πÄ‡∏ï‡∏£‡∏µ‡∏¢",
          "‡∏ö‡∏∏‡∏Å‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ö‡∏•‡πÄ‡∏¢‡∏µ‡∏¢‡∏° ‚Üí ‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° ‚Üí ‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏•‡∏∏‡∏Å‡∏•‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß"
        ],
        side: [{ h: "Key idea", t: "‡∏ä‡∏ô‡∏ß‡∏ô ‚â† ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î" }],
        notes: "‡∏¢‡πâ‡∏≥‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ '‡∏ä‡∏ô‡∏ß‡∏ô' ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏∂‡∏á‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡∏™‡∏∞‡∏™‡∏°‡∏°‡∏≤‡∏ô‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)"
      },
      {
        type: "chapter",
        year: 1915,
        kicker: "Chapter 2 ‚Ä¢ ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏ö",
        title: "‡∏à‡∏≤‡∏Å‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡∏™‡∏π‡πà‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡πÄ‡∏¢‡∏∑‡πâ‡∏≠",
        subtitle: "‡∏™‡∏ô‡∏≤‡∏°‡πÄ‡∏û‡∏•‡∏≤‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡∏ß‡∏£‡∏ö ‚Äú‡∏ï‡∏£‡∏∂‡∏á‚Äù ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏∂‡∏Å‡∏´‡∏£‡∏≠ (war of attrition)",
        notes: "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ñ‡∏•‡∏¥‡∏õ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏∂‡πâ‡∏ô: ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏π‡∏ï/‡∏£‡∏∞‡∏ö‡∏ö ‚Üí ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡∏£‡∏ö"
      },
      {
        type: "content",
        year: 1916,
        kicker: "Slide 6 ‚Ä¢ ‡∏™‡∏ô‡∏≤‡∏°‡πÄ‡∏û‡∏•‡∏≤‡∏∞",
        title: "Trench Warfare: ‡∏¢‡∏∂‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡∏ï‡∏≤‡∏¢‡∏°‡∏´‡∏≤‡∏®‡∏≤‡∏•",
        subtitle: "‡πÅ‡∏ô‡∏ß‡∏£‡∏ö‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å ‚Äú‡∏ï‡∏£‡∏∂‡∏á‚Äù ‡∏¢‡∏∑‡∏î‡πÄ‡∏¢‡∏∑‡πâ‡∏≠ ‚Üí ‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏™‡∏∂‡∏Å‡∏´‡∏£‡∏≠",
        bullets: [
          "‡∏™‡∏ô‡∏≤‡∏°‡πÄ‡∏û‡∏•‡∏≤‡∏∞‡∏¢‡∏≤‡∏ß‡∏´‡∏•‡∏≤‡∏¢‡∏£‡πâ‡∏≠‡∏¢‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£ ‚Üí ‡∏™‡∏†‡∏≤‡∏û‡πÇ‡∏´‡∏î: ‡πÇ‡∏Ñ‡∏•‡∏ô ‡∏´‡∏ô‡∏π ‡πÇ‡∏£‡∏Ñ‡∏†‡∏±‡∏¢",
          "‡∏Å‡∏≤‡∏£‡∏ö‡∏∏‡∏Å‡∏ú‡πà‡∏≤‡∏ô‡∏•‡∏ß‡∏î‡∏´‡∏ô‡∏≤‡∏°/‡∏õ‡∏∑‡∏ô‡∏Å‡∏• ‚Üí ‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏ô‡∏±‡∏Å ‡πÅ‡∏ï‡πà‡πÅ‡∏ó‡∏ö‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤",
          "‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡∏µ‡∏Å‡∏ù‡πà‡∏≤‡∏¢‡∏´‡∏°‡∏î‡πÅ‡∏£‡∏á/‡∏´‡∏°‡∏î‡∏Ñ‡∏ô‚Äù ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ä‡∏±‡∏¢‡∏ä‡∏ô‡∏∞‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô"
        ],
        side: [{ h: "‡∏ó‡∏≥‡πÑ‡∏°‡∏°‡∏±‡∏ô‡∏ï‡∏±‡∏ô?", t: "‡∏õ‡∏∑‡∏ô‡∏Å‡∏• + ‡∏õ‡∏∑‡∏ô‡πÉ‡∏´‡∏ç‡πà ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏ô‡∏≤‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ó‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ" }],
        notes: "‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏∏‡∏ó‡∏ò‡∏Å‡∏≤‡∏£ (Somme/Verdun) ‡πÉ‡∏´‡πâ‡∏û‡∏π‡∏î‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏ô‡πâ‡∏ô‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á '‡∏™‡∏∂‡∏Å‡∏´‡∏£‡∏≠'"
      },
      {
        type: "content",
        year: 1915,
        kicker: "Slide 7 ‚Ä¢ ‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡πÉ‡∏´‡∏°‡πà",
        title: "‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÉ‡∏´‡∏°‡πà: ‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏™‡∏°‡∏±‡∏¢‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏î‡∏Ç‡∏∂‡πâ‡∏ô",
        subtitle: "‡∏õ‡∏∑‡∏ô‡∏Å‡∏• ‚Ä¢ ‡∏õ‡∏∑‡∏ô‡πÉ‡∏´‡∏ç‡πà ‚Ä¢ ‡∏Å‡πä‡∏≤‡∏ã‡∏û‡∏¥‡∏© ‚Ä¢ ‡∏£‡∏ñ‡∏ñ‡∏±‡∏á ‚Ä¢ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏¥‡∏ô ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏Å‡∏°",
        bullets: [
          "<b class='text-white'>‡∏õ‡∏∑‡∏ô‡∏Å‡∏• & ‡∏õ‡∏∑‡∏ô‡πÉ‡∏´‡∏ç‡πà</b>: ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ö‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏π‡πà",
          "<b class='text-white'>‡∏Å‡πä‡∏≤‡∏ã‡∏û‡∏¥‡∏©</b>: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏∏‡∏Å‡∏Ç‡πå‡∏ó‡∏£‡∏°‡∏≤‡∏ô ‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö‡∏ñ‡∏≤‡∏ß‡∏£ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏î‡∏Å‡∏•‡∏±‡∏ß‡∏ó‡∏≤‡∏á‡∏à‡∏¥‡∏ï‡πÉ‡∏à",
          "<b class='text-white'>‡∏£‡∏ñ‡∏ñ‡∏±‡∏á/‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏¥‡∏ô</b>: ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏¢‡∏∏‡∏Ñ‡πÉ‡∏´‡∏°‡πà (‡∏ä‡πà‡∏ß‡∏á‡πÅ‡∏£‡∏Å‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î)"
        ],
        side: [{ h: "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏à‡∏≥", t: "‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤ ‚Äò‡∏à‡∏£‡∏¥‡∏¢‡∏ò‡∏£‡∏£‡∏°‚Äô ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏¢‡∏¥‡πà‡∏á‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß" }],
        notes: "‡∏¢‡∏Å‡∏†‡∏≤‡∏û‡∏à‡∏≥: ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å‡∏Å‡∏±‡∏ô‡πÅ‡∏Å‡πä‡∏™/‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏¢‡∏∏‡∏Ñ‡πÅ‡∏£‡∏Å"
      },
      {
        type: "chapter",
        year: 1917,
        kicker: "Chapter 3 ‚Ä¢ ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡πÅ‡∏•‡∏∞‡∏à‡∏∏‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô",
        title: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÇ‡∏•‡∏Å",
        subtitle: "‡∏ú‡∏π‡πâ‡∏Ñ‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÅ‡∏Ñ‡πà‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡∏£‡∏ö ‡πÅ‡∏ï‡πà‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à ‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏à‡∏¥‡∏ï‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°",
        notes: "‡∏Ñ‡∏∏‡∏°‡πÇ‡∏ó‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏™‡∏≤‡∏£‡∏Ñ‡∏î‡∏µ: ‚Äò‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏à‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏´‡∏¢‡∏∏‡∏î‚Äô"
      },
      {
        type: "content",
        year: 1917,
        kicker: "Slide 9 ‚Ä¢ ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏™‡∏±‡∏á‡∏Ñ‡∏°",
        title: "‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏à‡∏ö‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡∏£‡∏ö",
        subtitle: "‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢ ‚Ä¢ ‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡πÉ‡∏ô‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô ‚Ä¢ ‡∏ö‡∏≤‡∏î‡πÅ‡∏ú‡∏•‡∏ó‡∏≤‡∏á‡πÉ‡∏à (PTSD) ‚Ä¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏ß‡πâ‡∏ß‡∏≤‡∏á‡πÉ‡∏à‡∏£‡∏±‡∏ê",
        bullets: [
          "‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö ‚Äú‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏¥‡∏ö‡∏•‡πâ‡∏≤‡∏ô‚Äù (‡∏ó‡∏´‡∏≤‡∏£+‡∏û‡∏•‡πÄ‡∏£‡∏∑‡∏≠‡∏ô) ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏ö‡∏≤‡∏î‡πÄ‡∏à‡πá‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏´‡∏≤‡∏®‡∏≤‡∏•",
          "‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô/‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏≤‡∏ß‡∏£",
          "Trauma ‡∏Ç‡∏≠‡∏á‡∏ó‡∏´‡∏≤‡∏£‡∏ú‡πà‡∏≤‡∏ô‡∏®‡∏∂‡∏Å (shell shock) ‚Üí ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î PTSD ‡πÉ‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô"
        ],
        side: [{ h: "‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏Ñ‡∏ô‡∏°‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏°", t: "‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏•‡πÉ‡∏ô‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡∏±‡∏ö‡∏£‡∏±‡∏ê" }],
        notes: "‡∏ñ‡πâ‡∏≤‡∏û‡∏π‡∏î‡πÉ‡∏´‡πâ‡∏Ñ‡∏°: ‚Äò‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÇ‡∏ï‡∏°‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏à‚Äô"
      },
      {
        type: "content",
        year: 1918,
        kicker: "Slide 10 ‚Ä¢ ‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°",
        title: "‡∏™‡∏±‡∏ô‡∏ï‡∏¥‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏¢‡∏∏‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏° = ‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡πÑ‡∏ü‡πÉ‡∏´‡∏°‡πà",
        subtitle: "‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏°‡∏™‡∏•‡∏≤‡∏¢‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏£‡∏£‡∏î‡∏¥ + ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏•‡∏á‡πÇ‡∏ó‡∏© ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏±‡∏ö‡πÅ‡∏Ñ‡πâ‡∏ô ‚Üí ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏î‡πÇ‡∏ï‡πà‡∏á ‚Üí ‡∏õ‡∏π‡∏ó‡∏≤‡∏á‡∏™‡∏π‡πà WWII",
        bullets: [
          "‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏£‡∏£‡∏î‡∏¥‡πÉ‡∏´‡∏ç‡πà‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏´‡πà‡∏á‡∏•‡πà‡∏°‡∏™‡∏•‡∏≤‡∏¢ ‚Üí ‡πÄ‡∏Å‡∏¥‡∏î‡∏£‡∏±‡∏ê‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏û‡∏£‡∏°‡πÅ‡∏î‡∏ô",
          "‡∏™‡∏ô‡∏ò‡∏¥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÅ‡∏ß‡∏£‡πå‡∏ã‡∏≤‡∏¢‡∏•‡∏á‡πÇ‡∏ó‡∏©‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏ô‡∏µ‡∏´‡∏ô‡∏±‡∏Å ‚Üí ‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à/‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏õ‡∏±‡πà‡∏ô‡∏õ‡πà‡∏ß‡∏ô",
          "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏±‡∏ö‡∏≠‡∏≤‡∏¢ + ‡∏†‡∏≤‡∏£‡∏∞‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏™‡∏∏‡∏î‡πÇ‡∏ï‡πà‡∏á"
        ],
        side: [{ h: "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡πÄ‡∏î‡πá‡∏î", t: "‡∏™‡∏±‡∏ô‡∏ï‡∏¥‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏•‡∏á‡πÇ‡∏ó‡∏©‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏°‡∏±‡∏Å‡πÑ‡∏°‡πà‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô" }],
        notes: "‡πÇ‡∏¢‡∏á‡∏™‡∏±‡πâ‡∏ô ‡πÜ: ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏´‡∏•‡∏±‡∏á‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÉ‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î WWII"
      },
      {
        type: "content",
        year: 1918,
        kicker: "Final ‚Ä¢ ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
        title: "‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å WWI (‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ)",
        subtitle: "‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏î‡∏Å‡∏•‡∏±‡∏ß ‚Ä¢ ‡∏Å‡∏•‡πÑ‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏π‡∏ï ‚Ä¢ ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£‡πÅ‡∏Ç‡πá‡∏á‡∏Å‡∏£‡πâ‡∏≤‡∏ß ‚Ä¢ ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏π‡πà‡∏à‡∏£‡∏¥‡∏¢‡∏ò‡∏£‡∏£‡∏°",
        bullets: [
          "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏∂‡∏á‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡∏™‡∏∞‡∏™‡∏° + ‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÉ‡∏´‡∏ç‡πà",
          "‡∏Å‡∏≤‡∏£‡∏ó‡∏π‡∏ï‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡πÑ‡∏Å‡∏Ñ‡∏•‡∏µ‡πà‡∏Ñ‡∏•‡∏≤‡∏¢‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£ ‚Äú‡∏≠‡∏±‡∏õ‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‚Äù",
          "‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÇ‡∏´‡∏î‡∏Ç‡∏∂‡πâ‡∏ô ‡∏´‡∏≤‡∏Å‡πÑ‡∏£‡πâ‡∏Å‡∏£‡∏≠‡∏ö‡∏à‡∏£‡∏¥‡∏¢‡∏ò‡∏£‡∏£‡∏°"
        ],
        side: [
          { h: "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏•‡∏¥‡∏õ", t: "‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‚Äî ‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß" },
          { h: "‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ä‡∏ß‡∏ô‡∏Ñ‡∏¥‡∏î", t: "‡∏ñ‡πâ‡∏≤‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÅ‡∏ö‡∏ö 1914 ‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?" }
        ],
        notes: "‡∏û‡∏π‡∏î‡∏ä‡πâ‡∏≤ ‡πÜ ‡∏Ñ‡∏∏‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏¢‡∏∏‡∏î 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡∏Ñ‡∏•‡∏¥‡∏õ"
      }
    ];

    const years = [1914,1915,1916,1917,1918];

    /* --------------------- state --------------------- */
    let idx = 0;
    let notesOn = false;
    let overviewOn = false;
    let recordMode = false;

    /* --------------------- DOM refs --------------------- */
    const elSlide = document.getElementById("slide");
    const elNotesBlock = document.getElementById("notesBlock");
    const elNotesText = document.getElementById("notesText");
    const elOverview = document.getElementById("overview");
    const elOvGrid = document.getElementById("ovGrid");
    const elProg = document.getElementById("progress");
    const elSlideCount = document.getElementById("slideCount");
    const elBottomCount = document.getElementById("bottomCount");
    const elOvCount = document.getElementById("ovCount");
    const elYearPill = document.getElementById("yearPill");
    const elActiveYear = document.getElementById("activeYear");
    const elTimeFill = document.getElementById("timeFill");
    const elBg = document.getElementById("bg");
    const elRecordPill = document.getElementById("recordPill");

    /* buttons */
    document.getElementById("btnPrev").onclick = () => prev();
    document.getElementById("btnNext").onclick = () => next();
    document.getElementById("btnNotes").onclick = () => toggleNotes();
    document.getElementById("btnOverview").onclick = () => toggleOverview();
    document.getElementById("btnRecord").onclick = () => toggleRecord();
    document.getElementById("btnFs").onclick = () => toggleFs();

    /* --------------------- render helpers --------------------- */
    function setBgByYear(y){
      let cls = "from-yellow-500/8 via-transparent to-cyan-500/8";
      if (y <= 1914) cls = "from-yellow-500/8 via-transparent to-cyan-500/8";
      else if (y === 1915) cls = "from-yellow-500/7 via-transparent to-violet-500/8";
      else if (y === 1916) cls = "from-amber-500/7 via-transparent to-cyan-500/9";
      else if (y === 1917) cls = "from-violet-500/9 via-transparent to-cyan-500/8";
      else cls = "from-cyan-500/9 via-transparent to-yellow-500/7";
      elBg.className = `fixed inset-0 bg-gradient-to-br ${cls}`;
    }

    function setTimeline(y){
      elActiveYear.textContent = y;
      const i = years.indexOf(y);
      const pct = ((i+1)/years.length) * 100;
      elTimeFill.style.width = pct + "%";

      years.forEach((yy)=>{
        const el = document.getElementById("y"+yy);
        if (!el) return;
        if (yy === y){
          el.className = "rounded-xl border border-yellow-300/40 bg-yellow-300/10 text-yellow-100 px-2 py-2 text-xs shadow-[0_0_24px_rgba(253,224,71,0.18)]";
        } else {
          el.className = "rounded-xl border border-white/10 bg-white/5 text-white/60 px-2 py-2 text-xs";
        }
      });
    }

    function counts(){
      const t = slides.length;
      elSlideCount.textContent = `Slide ${idx+1}/${t}`;
      elBottomCount.textContent = `Slide ${idx+1}/${t}`;
      elOvCount.textContent = `Slide ${idx+1}/${t}`;
      elProg.style.width = `${((idx+1)/t)*100}%`;
    }

    function stripTags(html){
      const d = document.createElement("div");
      d.innerHTML = html;
      return d.textContent || d.innerText || "";
    }

    function renderOverview(){
      elOvGrid.innerHTML = "";
      slides.forEach((s,n)=>{
        const btn = document.createElement("button");
        btn.className = "rounded-2xl border border-white/10 bg-white/5 p-5 text-left transition hover:bg-white/10 active:translate-y-[1px]";
        btn.innerHTML = `
          <div class="mb-2 flex items-center justify-between">
            <div class="text-xs text-white/60">${s.kicker}</div>
            <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">${s.year}</span>
          </div>
          <div class="lc2 text-sm font-semibold text-white/90">${stripTags(s.title)}</div>
          <div class="mt-2 lc3 text-xs leading-relaxed text-white/60">${s.subtitle}</div>
        `;
        btn.onclick = ()=>{ idx = n; overviewOn=false; update(); };
        elOvGrid.appendChild(btn);
      });
    }

    function animateSwap(nextHtml){
      elSlide.classList.remove("fade-enter", "fade-enter-active", "fade-exit", "fade-exit-active");
      elSlide.classList.add("fade-exit");
      requestAnimationFrame(()=>{
        elSlide.classList.add("fade-exit-active");
        setTimeout(()=>{
          elSlide.innerHTML = nextHtml;
          elSlide.classList.remove("fade-exit", "fade-exit-active");
          elSlide.classList.add("fade-enter");
          requestAnimationFrame(()=>{
            elSlide.classList.add("fade-enter-active");
            setTimeout(()=> elSlide.classList.remove("fade-enter", "fade-enter-active"), 450);
          });
        }, 330);
      });
    }

    function renderSlide(){
      const s = slides[idx];
      const y = s.year;

      setBgByYear(y);
      setTimeline(y);

      elYearPill.textContent = `Year: ${y}`;

      if (notesOn && s.notes){
        elNotesText.textContent = s.notes;
        elNotesBlock.classList.remove("hidden");
      } else {
        elNotesBlock.classList.add("hidden");
      }

      if (overviewOn){
        elOverview.classList.remove("hidden");
        renderOverview();
      } else {
        elOverview.classList.add("hidden");
      }

      let html = "";
      if (s.type === "chapter"){
        html = `
          <div class="relative overflow-hidden rounded-[30px] border border-white/10 bg-gradient-to-br from-white/10 to-white/5 p-10 shadow-[0_35px_120px_rgba(0,0,0,0.55)] backdrop-blur-2xl">
            <div class="absolute inset-0 opacity-70">
              <div class="absolute -left-24 top-0 h-72 w-72 rounded-full bg-yellow-300/10 blur-3xl"></div>
              <div class="absolute -right-24 bottom-0 h-72 w-72 rounded-full bg-cyan-300/10 blur-3xl"></div>
            </div>
            <div class="relative">
              <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">‚ú® ${s.kicker}</span>
              <h1 class="mt-4 text-balance text-3xl font-extrabold tracking-tight sm:text-4xl lg:text-5xl">${s.title}</h1>
              <p class="mt-3 max-w-3xl text-pretty text-[15px] leading-7 text-white/70 sm:text-[16px]">${s.subtitle}</p>
            </div>
          </div>
        `;
      } else {
        const bullets = (s.bullets||[]).map(b=>`
          <li class="flex gap-3">
            <span class="mt-[7px] h-2 w-2 shrink-0 rounded-full bg-yellow-300 shadow-[0_0_20px_rgba(253,224,71,0.30)]"></span>
            <span class="text-[15px] leading-7 text-white/85 sm:text-[16px]">${b}</span>
          </li>
        `).join("");

        const side = (s.side||[]).map(c=>`
          <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
            <div class="mb-2 text-sm font-semibold text-white/90">‚ú® ${c.h}</div>
            <div class="text-sm leading-relaxed text-white/70">${c.t}</div>
          </div>
        `).join("");

        html = `
          <div class="relative overflow-hidden rounded-[30px] border border-white/10 bg-white/[0.06] shadow-[0_35px_120px_rgba(0,0,0,0.58)] backdrop-blur-2xl">
            <div class="absolute inset-0 bg-gradient-to-b from-white/12 to-transparent opacity-90"></div>
            <div class="relative p-7 sm:p-10">
              <div class="mb-4 flex flex-wrap items-center justify-between gap-3">
                <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">${s.kicker}</span>
                <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">‚å® ‚Üê ‚Üí Space</span>
              </div>

              <h1 class="text-balance text-3xl font-extrabold tracking-tight sm:text-4xl lg:text-5xl">${s.title}</h1>
              <p class="mt-3 max-w-3xl text-pretty text-[15px] leading-7 text-white/70 sm:text-[16px]">${s.subtitle}</p>

              <div class="mt-8 grid grid-cols-1 gap-6 lg:grid-cols-[1.2fr_0.8fr]">
                <div><ul class="space-y-3">${bullets}</ul></div>
                <div class="space-y-4">${side}</div>
              </div>
            </div>
            <div class="absolute inset-x-0 bottom-0 h-24 bg-gradient-to-t from-black/40 to-transparent"></div>
          </div>
        `;
      }

      animateSwap(html);
    }

    function update(){ counts(); renderSlide(); }

    /* --------------------- actions --------------------- */
    function next(){ idx = clamp(idx+1, 0, slides.length-1); update(); }
    function prev(){ idx = clamp(idx-1, 0, slides.length-1); update(); }

    function toggleNotes(){ notesOn = !notesOn; update(); }
    function toggleOverview(){ overviewOn = !overviewOn; update(); }

    function toggleRecord(){
      recordMode = !recordMode;
      document.body.classList.toggle("record", recordMode);
      elRecordPill.classList.toggle("hidden", !recordMode);
    }

    async function toggleFs(){
      try{
        if(!document.fullscreenElement) await document.documentElement.requestFullscreen();
        else await document.exitFullscreen();
      }catch{}
    }

    /* --------------------- keyboard --------------------- */
    window.addEventListener("keydown", (e)=>{
      const k = e.key.toLowerCase();

      if (overviewOn){
        if (k === "escape" || k === "g") { overviewOn=false; update(); }
        return;
      }

      if (k === "arrowright" || e.key === " " || k === "pagedown") next();
      if (k === "arrowleft" || k === "pageup") prev();
      if (k === "n") toggleNotes();
      if (k === "g") toggleOverview();
      if (k === "r") toggleRecord();
      if (k === "f") toggleFs();
    });

    /* init */
    update();
  </script>
</body>
</html>
